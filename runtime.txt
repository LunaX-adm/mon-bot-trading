#!/usr/bin/env python3
"""
ğŸš€ LunaX Trading Bot - Point d'entrÃ©e principal
Bot de trading crypto autonome niveau hedge fund
"""

import asyncio
import sys
import os
import signal
from pathlib import Path

project_root = Path(__file__).parent
sys.path.insert(0, str(project_root))

from bot.main import LunaXBot
from bot.utils.logger import setup_logger
from bot.utils.config import load_config

def signal_handler(signum, frame):
    """Gestionnaire de signaux pour arrÃªt propre"""
    print("\nğŸ›‘ Signal d'arrÃªt reÃ§u. ArrÃªt en cours...")
    sys.exit(0)

async def main():
    """Point d'entrÃ©e principal"""
    
    signal.signal(signal.SIGINT, signal_handler)
    signal.signal(signal.SIGTERM, signal_handler)
    
    print("""
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                    ğŸ¤– LUNAX TRADING BOT ğŸ¤–                   â•‘
    â•‘                                                              â•‘
    â•‘              ğŸš€ AI Hedge Fund Level Trading ğŸš€               â•‘
    â•‘                                                              â•‘
    â•‘  ğŸ“Š Multi-Agent IA  |  ğŸ¯ Ultra-Filtered Signals  |  âš¡ 24/7 â•‘
    â•‘                                                              â•‘
    â•‘              CrÃ©Ã© par LunaX-adm | Version 1.0.0             â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    """)
    
    try:
        print("âš™ï¸ Chargement de la configuration...")
        config = load_config()
        
        log_file = config.get('logging', {}).get('file', 'data/logs/lunax.log')
        log_level = config.get('logging', {}).get('level', 'INFO')
        logger = setup_logger("LunaX", log_level, log_file)
        
        logger.info("ğŸš€ DÃ©marrage de LunaX Trading Bot")
        
        print("ğŸ¤– Initialisation des agents IA...")
        bot = LunaXBot()
        
        print("ğŸ“¡ Connexion aux APIs...")
        
        print("âœ… LunaX Bot prÃªt - DÃ©marrage du trading autonome...")
        print("ğŸ“Š Mode: Scan automatique 24h/24")
        print("ğŸ¯ Objectif: 1 trade ultra-filtrÃ© par jour")
        print("âš ï¸ Appuyez sur Ctrl+C pour arrÃªter\n")
        
        await bot.start()
        
    except KeyboardInterrupt:
        print("\nğŸ›‘ ArrÃªt demandÃ© par l'utilisateur")
        logger.info("ğŸ›‘ LunaX Bot arrÃªtÃ© par l'utilisateur")
    except Exception as e:
        print(f"\nâŒ Erreur fatale: {e}")
        logger.error(f"âŒ Erreur fatale: {e}")
        sys.exit(1)

if __name__ == "__main__":
    if sys.version_info < (3, 8):
        print("âŒ Python 3.8+ requis")
        sys.exit(1)
    
    asyncio.run(main())
